From cb73af813d91ac50efb87df9df5d332dfac230f2 Mon Sep 17 00:00:00 2001
From: Victor Bo <bvoid@yandex.ru>
Date: Sun, 28 Mar 2021 10:59:42 -0400
Subject: [PATCH 08/21] rework 'lavender' overlay

---
 Xiaomi/RedmiNote7/res/values/config.xml       | 224 ++++++++++++++----
 Xiaomi/RedmiNote7/res/values/notch.xml        |   6 +-
 .../RedmiNote7/res/xml/power_profile_test.xml |  52 ----
 3 files changed, 175 insertions(+), 107 deletions(-)
 delete mode 100644 Xiaomi/RedmiNote7/res/xml/power_profile_test.xml

diff --git a/Xiaomi/RedmiNote7/res/values/config.xml b/Xiaomi/RedmiNote7/res/values/config.xml
index ddd3cfc..2e069a8 100644
--- a/Xiaomi/RedmiNote7/res/values/config.xml
+++ b/Xiaomi/RedmiNote7/res/values/config.xml
@@ -1,45 +1,54 @@
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
-    <fraction name="config_maximumScreenDimRatio">29.999996%</fraction>
-    <fraction name="config_autoBrightnessAdjustmentMaxGamma">100.0%</fraction>
-    <fraction name="config_screenAutoBrightnessDozeScaleFactor">100.0%</fraction>
-    <integer-array name="config_autoBrightnessLcdBacklightValues">
-        <item>3</item>
-        <item>3</item>
+    <array name="config_autoBrightnessButtonBacklightValues" />
+    <array name="config_autoBrightnessDisplayValuesNits">
+        <item>7.702998</item>
+        <item>32.31226</item>
+        <item>38.786167</item>
+        <item>43.30993</item>
+        <item>46.851162</item>
+        <item>55.90478</item>
+        <item>61.334614</item>
+        <item>68.4388</item>
+        <item>75.59099</item>
+        <item>82.8686</item>
+        <item>91.49397</item>
+        <item>102.49851</item>
+        <item>118.8174</item>
+        <item>144.68486</item>
+        <item>180.69225</item>
+        <item>225.84135</item>
+        <item>292.46844</item>
+        <item>377.05084</item>
+        <item>481.93427</item>
+    </array>
+    <array name="config_autoBrightnessLcdBacklightValues" />
+    <integer-array name="config_autoBrightnessLevels">
+        <item>1</item>
+        <item>2</item>
         <item>3</item>
-        <item>5</item>
-        <item>7</item>
-        <item>9</item>
+        <item>4</item>
+        <item>8</item>
         <item>12</item>
-        <item>15</item>
-        <item>17</item>
-        <item>18</item>
         <item>20</item>
-        <item>22</item>
-        <item>29</item>
-        <item>37</item>
-        <item>50</item>
-        <item>50</item>
-        <item>50</item>
-        <item>50</item>
+        <item>33</item>
         <item>55</item>
-        <item>62</item>
-        <item>62</item>
-        <item>72</item>
-        <item>76</item>
-        <item>82</item>
         <item>90</item>
-        <item>101</item>
-        <item>105</item>
-        <item>110</item>
-        <item>119</item>
-        <item>143</item>
-        <item>190</item>
-        <item>214</item>
-        <item>240</item>
-        <item>255</item>
+        <item>148</item>
+        <item>245</item>
+        <item>403</item>
+        <item>665</item>
+        <item>1097</item>
+        <item>1808</item>
+        <item>2981</item>
+        <item>5000</item>
     </integer-array>
-    <integer-array name="config_autoBrightnessLevels">
+    <array name="config_minimumBrightnessCurveNits">
+        <item>0.0</item>
+        <item>50.0</item>
+        <item>90.0</item>
+    </array>
+    <integer-array name="config_screenBrightnessBacklight">
         <item>1</item>
         <item>2</item>
         <item>3</item>
@@ -48,32 +57,141 @@
         <item>6</item>
         <item>7</item>
         <item>8</item>
+        <item>9</item>
         <item>10</item>
+        <item>11</item>
         <item>12</item>
+        <item>13</item>
+        <item>14</item>
         <item>15</item>
+        <item>16</item>
+        <item>17</item>
         <item>18</item>
-        <item>22</item>
+        <item>19</item>
+        <item>20</item>
+        <item>25</item>
         <item>30</item>
+        <item>35</item>
         <item>40</item>
+        <item>45</item>
         <item>50</item>
+        <item>55</item>
+        <item>60</item>
+        <item>65</item>
         <item>70</item>
+        <item>75</item>
+        <item>80</item>
+        <item>85</item>
+        <item>90</item>
+        <item>95</item>
+        <item>100</item>
+        <item>105</item>
+        <item>110</item>
+        <item>115</item>
+        <item>120</item>
+        <item>125</item>
+        <item>130</item>
+        <item>135</item>
+        <item>140</item>
+        <item>145</item>
         <item>150</item>
-        <item>300</item>
-        <item>400</item>
-        <item>520</item>
-        <item>600</item>
-        <item>700</item>
-        <item>900</item>
-        <item>1100</item>
-        <item>1200</item>
-        <item>1300</item>
-        <item>1500</item>
-        <item>1800</item>
-        <item>2400</item>
-        <item>2800</item>
-        <item>3500</item>
-        <item>4000</item>
+        <item>155</item>
+        <item>160</item>
+        <item>165</item>
+        <item>170</item>
+        <item>175</item>
+        <item>180</item>
+        <item>185</item>
+        <item>190</item>
+        <item>195</item>
+        <item>200</item>
+        <item>205</item>
+        <item>210</item>
+        <item>215</item>
+        <item>220</item>
+        <item>225</item>
+        <item>230</item>
+        <item>235</item>
+        <item>240</item>
+        <item>245</item>
+        <item>250</item>
+        <item>255</item>
     </integer-array>
+    <array name="config_screenBrightnessNits">
+        <item>2.685</item>
+        <item>3.343</item>
+        <item>4.13</item>
+        <item>5.216</item>
+        <item>6.308</item>
+        <item>7.565</item>
+        <item>9.269</item>
+        <item>10.98</item>
+        <item>13.25</item>
+        <item>15.49</item>
+        <item>18.42</item>
+        <item>20.6</item>
+        <item>22.71</item>
+        <item>24.68</item>
+        <item>26.31</item>
+        <item>28.39</item>
+        <item>30.34</item>
+        <item>32.39</item>
+        <item>33.94</item>
+        <item>35.94</item>
+        <item>45.12</item>
+        <item>54</item>
+        <item>62.31</item>
+        <item>70.73</item>
+        <item>78.85</item>
+        <item>86.41</item>
+        <item>93.53</item>
+        <item>102.3</item>
+        <item>109.1</item>
+        <item>118.7</item>
+        <item>126.4</item>
+        <item>136.9</item>
+        <item>147.8</item>
+        <item>158.9</item>
+        <item>168.3</item>
+        <item>177.4</item>
+        <item>186.6</item>
+        <item>195.7</item>
+        <item>204.5</item>
+        <item>214</item>
+        <item>221.8</item>
+        <item>234</item>
+        <item>242.1</item>
+        <item>250.6</item>
+        <item>263.4</item>
+        <item>272.4</item>
+        <item>282.5</item>
+        <item>296.3</item>
+        <item>305.6</item>
+        <item>315.3</item>
+        <item>329.8</item>
+        <item>339.8</item>
+        <item>349.7</item>
+        <item>357.4</item>
+        <item>364.6</item>
+        <item>374.6</item>
+        <item>384.9</item>
+        <item>392.5</item>
+        <item>402.8</item>
+        <item>413.6</item>
+        <item>421.6</item>
+        <item>432.2</item>
+        <item>440.3</item>
+        <item>448.3</item>
+        <item>459.2</item>
+        <item>467.6</item>
+        <item>478.5</item>
+    </array>
+
+    <dimen name="rounded_corner_radius_bottom">108.0px</dimen>
+    <dimen name="rounded_corner_radius_top">106.0px</dimen>
+    <dimen name="status_bar_padding_start">12dp</dimen>
+    <dimen name="status_bar_padding_end">12dp</dimen>
+
     <bool name="config_bluetooth_le_peripheral_mode_supported">true</bool>
     <bool name="skip_restoring_network_selection">true</bool>
     <bool name="config_showNavigationBar">true</bool>
@@ -88,16 +206,17 @@
     <bool name="config_lidControlsSleep">true</bool>
     <bool name="config_device_volte_available">true</bool>
     <bool name="config_device_vt_available">true</bool>
+    <bool name="config_device_wfc_ims_available">true</bool>
     <bool name="config_hotswapCapable">true</bool>
     <bool name="config_automatic_brightness_available">true</bool>
     <bool name="config_allowAutoBrightnessWhileDozing">false</bool>
     <bool name="config_displayBlanksAfterDoze">true</bool>
     <bool name="config_dozeAfterScreenOff">true</bool>
     <bool name="config_dozeAfterScreenOffByDefault">true</bool>
-    <bool name="config_dozeAlwaysOnDisplayAvailable">true</bool>
+    <bool name="config_dozeAlwaysOnDisplayAvailable">false</bool>
     <bool name="config_enableBurnInProtection">false</bool>
     <integer name="config_shutdownBatteryTemperature">610</integer>
-    <integer name="config_screenBrightnessSettingMinimum">3</integer>
+    <integer name="config_screenBrightnessSettingMinimum">1</integer>
     <integer name="config_screenBrightnessSettingDefault">128</integer>
     <integer name="config_screenBrightnessSettingMaximum">255</integer>
     <integer name="config_screenBrightnessDoze">17</integer>
@@ -105,6 +224,7 @@
     <integer name="config_screenBrightnessDim">3</integer>
     <integer name="config_autoBrightnessBrighteningLightDebounce">2000</integer>
     <integer name="config_autoBrightnessDarkeningLightDebounce">2000</integer>
+    <fraction name="config_maximumScreenDimRatio">29.999996%</fraction>
     <integer name="config_autoBrightnessInitialLightSensorRate">-1</integer>
     <integer name="config_autoBrightnessLightSensorRate">100</integer>
     <integer name="config_bluetooth_operating_voltage_mv">3300</integer>
diff --git a/Xiaomi/RedmiNote7/res/values/notch.xml b/Xiaomi/RedmiNote7/res/values/notch.xml
index 106be1a..baa36cf 100644
--- a/Xiaomi/RedmiNote7/res/values/notch.xml
+++ b/Xiaomi/RedmiNote7/res/values/notch.xml
@@ -18,8 +18,8 @@
 -->
 <resources>
     <!-- Height of the status bar in portrait -->
-    <dimen name="status_bar_height_portrait">89px</dimen>
+    <dimen name="status_bar_height_portrait">87px</dimen>
     <!-- Height of the status bar in landscape -->
     <dimen name="status_bar_height_landscape">24.0dip</dimen>
-	<string translatable="false" name="config_mainBuiltInDisplayCutout">M -176,0 L -176,89 L 176,89 L 176,0 Z</string>
-    </resources>
+    <string translatable="false" name="config_mainBuiltInDisplayCutout">M -176,0 L -176,87 L 176,87 L 176,0 Z</string>
+</resources>
diff --git a/Xiaomi/RedmiNote7/res/xml/power_profile_test.xml b/Xiaomi/RedmiNote7/res/xml/power_profile_test.xml
deleted file mode 100644
index 17bd39a..0000000
--- a/Xiaomi/RedmiNote7/res/xml/power_profile_test.xml
+++ /dev/null
@@ -1,52 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<device name="Android">
-    <item name="battery.capacity">3000</item>
-    <array name="cpu.clusters.cores">
-        <value>4</value>
-        <value>4</value>
-    </array>
-    <item name="cpu.suspend">5</item>
-    <item name="cpu.idle">1.11</item>
-    <item name="cpu.active">2.55</item>
-    <item name="cpu.cluster_power.cluster0">2.11</item>
-    <item name="cpu.cluster_power.cluster1">2.22</item>
-    <array name="cpu.core_speeds.cluster0">
-        <value>300000</value>
-        <value>1000000</value>
-        <value>2000000</value>
-    </array>
-    <array name="cpu.core_speeds.cluster1">
-        <value>300000</value>
-        <value>1000000</value>
-        <value>2500000</value>
-        <value>3000000</value>
-    </array>
-    <array name="cpu.core_power.cluster0">
-        <value>10</value>
-        <value>20</value>
-        <value>30</value>
-    </array>
-    <array name="cpu.core_power.cluster1">
-        <value>25</value>
-        <value>35</value>
-        <value>50</value>
-        <value>60</value>
-    </array>
-    <item name="ambient.on">0.5</item>
-    <item name="screen.on">100</item>
-    <item name="screen.full">800</item>
-    <item name="camera.flashlight">500</item>
-    <item name="camera.avg">600</item>
-    <item name="audio">100.0</item>
-    <item name="video">150.0</item>
-    <item name="gps.on">10</item>
-    <item name="radio.active">60</item>
-    <item name="radio.scanning">3</item>
-    <array name="radio.on">
-        <value>6</value>
-        <value>5</value>
-        <value>4</value>
-        <value>3</value>
-        <value>3</value>
-    </array>
-</device>
\ No newline at end of file
-- 
2.25.1

